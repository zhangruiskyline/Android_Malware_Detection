import vt
#import apk_download

API_KEY = 'a7ceb212f39d6a547859c65eb42b4ebacf48f90ea024ed71e5470b47f4688e31'
v = vt.VirusTotal(API_KEY)
apk_url = 'http://pollux.androidapksfree.com/hdata/7863bd57a17c070c77f35b53b2b9a624/com.facebook.orca_v113.0.0.21.70-54976886_Android-4.0.3.apk'
file_name = 'download/com.douquhd.xiaotu.apk'
report = v.scan(file_name)


import urlparse, os


path = urlparse.urlparse(apk_url).path
print os.path.splitext(path)[1]

if report.done:
    for antivirus, malware in report:
        if malware is not None:
            print
            print "Antivirus:", antivirus[0]
            print "Antivirus' version:", antivirus[1]
            print "Antivirus' update:", antivirus[2]
            print "Malware:", malware

import json
import hashlib
from virus_total_apis import PublicApi as VirusTotalPublicApi


vt_instance = VirusTotalPublicApi(API_KEY)

response =  vt_instance.get_url_report(apk_url)
#print json.dumps(response, sort_keys=False, indent=4)

if "positives" in response["results"] and response["results"]["positives"] == 0:
    print "No Error"


'''
import requests
import json
params = {'apikey': API_KEY, 'url':apk_url}
response = requests.post('https://www.virustotal.com/vtapi/v2/url/scan', data=params)

print response
'''

